<!-- 这是消息个人对话框 -->
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Message-dialog对话框</title>
		<link rel="stylesheet" type="text/css" href="asserts/CSS/yespaceCss.css">
		<!-- CSS库 -->
		<!-- Bootstrap -->
		<link rel="stylesheet" href="asserts/plugins/bootstrap/css/bootstrap.min.css" />
		<link rel="stylesheet" href="asserts/CSS/yespaceCss.css" />
		<!-- JS库 -->
		<script src="asserts/js/Yespacejs.js" type="text/javascript"></script>
		<script src="asserts/js/jquery.min.js" type="text/javascript"></script>
		<script src="asserts/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
		<script type="text/javascript" src="http://at.alicdn.com/t/font_1306353_d5trwbvsb05.js"></script>
	</head>
	<body>
		<!-- 顶栏 -->
		<nav class="top-header sticky-top shadow">
			<div class="container-fluid">
				<div class="row">
					<div class="col-2" align="center" style="vertical-align:bottom;">
						<svg class="icon" aria-hidden="true" style="font-size: 10vw;color: white;">
							<use xlink:href="#icon-fanhui"></use>
						</svg>
					</div>
					<div class="col-8" style="height: 0 auto;color: white;font-size: 6vw;font-weight: bold;justify-content: center;"
					 align="center">
						正在与<a style="color: white;font-size: 6vw;font-weight: bold;">胡萝卜</a>私聊
					</div>
					<div class="col-2"></div>
				</div>
			</div>
		</nav>
		<div>
			<div class=" container-dialog-liu">
				<p>
					<div class="otherp-liu">
						<div class="dialog-box shadow" style="margin: 30px 100px;">
							<div class="word-left-liu">
								你觉得这个东西怎么样？
							</div>
							<div class="circle">
								<div class="head-photo">
									<img class="id_img-liu" src="asserts/img/20130107210933_nGz3r.jpeg" alt="miemie rock">
								</div>
							</div>
						</div>
					</div>
				</p>
				<p>
					<div class="mine-liu" style="width: 100%;" align="right">
						<div class="dialog-box shadow" style="margin: 30px 100px;background-color: #fff;">
							<div class="word-right-liu" align="left">
								我觉得不错
							</div>
							<div class="circle">
								<div class="head-photo">
									<img class="id_img-liu" src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1565333434507&di=e547d8b3600d51794de1f175fc9efa9a&imgtype=0&src=http%3A%2F%2Fimg4.duitang.com%2Fuploads%2Fitem%2F201312%2F05%2F20131205172433_NsYGL.thumb.600_0.jpeg"
									 alt="miemie rock">
								</div>
							</div>
						</div>
					</div>
				</p>
				<p>
					<div class="mine-liu" style="width: 100%;" align="right">
						<div class="dialog-box shadow" style="margin: 30px 100px;background-color: #fff;">
							<div class="word-right-liu " style="margin: 45px 190px 45px 50px;color: var(--fColor);" align="left">
								我觉得不错我觉得不错我觉得不错我觉得不错我觉得不错我觉得不错我觉得不错我觉得不错我觉得不错我觉得不错
							</div>
							<div class="circle">
								<div class="head-photo">
									<img class="id_img-liu" src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1565333434507&di=e547d8b3600d51794de1f175fc9efa9a&imgtype=0&src=http%3A%2F%2Fimg4.duitang.com%2Fuploads%2Fitem%2F201312%2F05%2F20131205172433_NsYGL.thumb.600_0.jpeg"
									 alt="miemie rock">
								</div>
							</div>
						</div>
					</div>
				</p>
				<p>
					<div class="mine-liu" style="width: 100%;" align="right">
						<div class="dialog-box shadow" style="margin: 30px 100px;background-color: white;width: 50%;">
							<img src="http://b-ssl.duitang.com/uploads/item/201709/14/20170914120928_m3QLv.jpeg" style="width: 100%;z-index: -1;float: right;border-radius: 60px;" />
							<div class="circle">
								<div class="head-photo">
									<img class="id_img-liu" src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1565333434507&di=e547d8b3600d51794de1f175fc9efa9a&imgtype=0&src=http%3A%2F%2Fimg4.duitang.com%2Fuploads%2Fitem%2F201312%2F05%2F20131205172433_NsYGL.thumb.600_0.jpeg"
									 alt="miemie rock">
								</div>
							</div>
						</div>
					</div>
				</p>
				<p>
					<div class="mine-liu" style="width: 100%;" align="right">
						<div class="dialog-box shadow" style="margin: 30px 100px;background-color: #fff;">
							<div class="word-right-liu" align="left">
								[语音] 59s
							</div>
							<div class="circle">
								<div class="head-photo">
									<img class="id_img-liu" src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1565333434507&di=e547d8b3600d51794de1f175fc9efa9a&imgtype=0&src=http%3A%2F%2Fimg4.duitang.com%2Fuploads%2Fitem%2F201312%2F05%2F20131205172433_NsYGL.thumb.600_0.jpeg"
									 alt="miemie rock">
								</div>
							</div>
						</div>
					</div>
				</p>
			</div>

			<div class="bottom-liu shadow-irreguler">
				<div class="container-fluid">
					<div class="row mark-liu" style="display: none;">
						<div class="col-2"><svg class="icon" id="tupian" aria-hidden="true" style="font-size: 13vw;" >
								<use xlink:href="#icon-tupian"></use>
							</svg></div>
						<div class="col-2" style="margin-top: 1vw;" id="yuyinliu" >
							<svg class="icon" id="yuyin" aria-hidden="true" style="font-size: 10vw;color: var(--sColor);"
							onmousedown="liudown(this)" onmouseup="liuup(this)" >
								<use xlink:href="#icon-yuyin"></use>
							</svg></div>
						<div class="col-2">
							<img class="voice-liu" src="asserts/img/spinner.svg" style="height: 8vw;margin-top: 2vw;display:none;"
								onmousedown="liudown(this)" onmouseup="liuup(this)">
						</div>
						<div class="col-6"></div>
					</div>
					<div class="row">
						<div class="col-10" align="center" style="padding: 1vw;">
							<input type="text" name="input" id="input-liu" value="" class="shadow-irreguler input-liu " style="font-size: 40px;" onkeyup="liuinput('input-liu')" />
						</div>
						<div class="col-2" align="center">
							<div onclick="show_liu()">
								<svg id="xinzeng-liu" class="icon" aria-hidden="true" style="font-size: 10vw;color: var(--sColor);">
									<use xlink:href="#icon-xinzeng"></use>
								</svg>
							</div>
							<svg id="fabu-liu" class="icon" aria-hidden="true" style="font-size: 10vw;color: var(--fColor);display: none;">
								<use xlink:href="#icon-fabu"></use>
							</svg>
						</div>
					</div>
				</div>
				<div style="float: left;position: fixed;">
					<input type="button" name="" id="messageBtn-liu" value="" style="background-color: var(--fColor); width: 100%;height:10vw;bottom: 0;position: fixed;left: 0;display: none;font-size: 6vw;color: white;font-weight: bold;"/>
				</div>
			</div>
		</div>
	<script type="text/javascript">
		function liuinput(obj){
			var fbl = document.getElementById('fabu-liu');
			var xzl = document.getElementById('xinzeng-liu');
			if(document.getElementById(obj).value.length!==0){
				xzl.style.display = "none";
				fbl.style.display = "";
			}else{
				xzl.style.display = "";
				fbl.style.display = "none";
			}
		};
		var vliu = document.getElementsByClassName("voice-liu")[0];
		var yyliu = document.getElementById('yuyin');
		var btnElem=document.getElementById("yuyinliu");
		var ipliu = document.getElementById('messageBtn-liu');
		var posStart = 0;//初始化起点坐标
		var posEnd = 0;//初始化终点坐标
		var posMove = 0;//初始化滑动坐标
		console.log(screen);
		function initEvent() {
			btnElem.addEventListener("touchstart", function(event) {
				event.preventDefault();//阻止浏览器默认行为
				posStart = 0;
				posStart = event.touches[0].pageY;//获取起点坐标
				ipliu.value = '松开结束，上划取消';
				console.log("start");
				console.log(posStart+'---------开始坐标');
				vliu.style.display = "";
				ipliu.style.display = "";
				yyliu.style.color = 'var(--fColor)';
			});
			btnElem.addEventListener("touchmove", function(event) {
				event.preventDefault();//阻止浏览器默认行为
				posMove = 0;
				posMove = event.targetTouches[0].pageY;//获取滑动实时坐标
				if(posStart - posMove < 200){
					ipliu.value = '松开结束，上划取消';
				}else{
					ipliu.value = '松开手指，取消发送';
				}
			});
			btnElem.addEventListener("touchend", function(event) {
				event.preventDefault();
				posEnd = 0;
				posEnd = event.changedTouches[0].pageY;//获取终点坐标
				btnElem.value = '按住 说话';
				console.log("End");
				console.log(posEnd+'---------结束坐标');
				if(posStart - posEnd < 200 ){
					console.log("发送成功");
					save();
				}else{
					console.log("取消发送");
					console.log("Cancel");
				};
				vliu.style.display = "none";
				ipliu.style.display = "none";
				yyliu.style.color = 'var(--sColor)';
				ipliu.value = '';
			});
		};
		initEvent();
		function save(){
			//ajax
			console.log('Success');
		}
	</script>
	
	</body>
</html>
